{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../Services/auth.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../Services/toastr.service\";\nimport * as i5 from \"../app.component\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = [\"dataTable\"];\nconst _c1 = [\"btnClose\"];\nconst _c2 = [\"btnModalOpen\"];\n\nfunction ProductComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1, \"You can't leave this empty.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ProductComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1, \"You can't leave this empty.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c3 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\n\nexport let ProductComponent = /*#__PURE__*/(() => {\n  class ProductComponent {\n    constructor(authService, fb, router, toastrService, appComponent) {\n      this.authService = authService;\n      this.fb = fb;\n      this.router = router;\n      this.toastrService = toastrService;\n      this.appComponent = appComponent;\n      this.isDataGridShow = true;\n      this.isBtnCreateShow = true;\n      this.tableData = [];\n      this.parent = []; // Window['appcustomer'] = this;\n    }\n\n    ngOnInit() {\n      this.getProductList();\n      this.isDataGridShow = true;\n      this.CreateProductForm();\n    }\n\n    CreateProductForm() {\n      this.header = 'Create Customer';\n      this.productForm = this.fb.group({\n        VproductId: ['', Validators.nullValidator],\n        VproductName: ['', Validators.required],\n        NproductPrice: ['', Validators.required]\n      });\n    }\n\n    getProductList() {\n      this.authService.getProductList().subscribe(data => {\n        data.productlist.forEach((value, index) => {\n          value.index = index + 1;\n        });\n        this.tableData = data.productlist;\n        this.dtOptions = {\n          data: this.tableData,\n          columns: [{\n            title: '#',\n            data: 'index'\n          }, {\n            title: 'Product Name',\n            data: 'vproductName'\n          }, {\n            title: 'Action',\n            data: 'vproductId',\n            sortable: false,\n            'render': function (data, type, full, meta) {\n              const bid = '\\'' + full.vproductId + '\\'';\n              return '<div class=\"text-center fs-18\"> ' + '<a title=\"Edit\" class=\"edit\" onclick=\"Window.appstore.edit(' + bid + ')\"><i class=\"far fa-edit\" style=\"cursor: pointer;\"> </i> </a> |' + '<a title=\"Delete\" onclick=\"Window.appstore.remove(' + bid + ')\"> <i class=\"fas fa-trash-alt\" style=\"color: red; cursor: pointer;\"></i></a>' + '</div>';\n            }\n          }],\n          responsive: true,\n          autoWidth: false\n        };\n      }, err => {\n        console.log(err);\n      }, () => {\n        this.dataTable = $(this.table.nativeElement);\n        this.dataTable.DataTable(this.dtOptions);\n      });\n    }\n\n    saveProduct() {\n      if (this.productForm.valid) {\n        this.productModel = Object.assign({}, this.productForm.value);\n        this.productModel.VproductId = this.productModel.VproductId === '' ? null : this.productModel.VproductId;\n        this.authService.saveProduct(this.productModel).subscribe(() => {\n          this.btnClose.nativeElement.click();\n          this.toastrService.success('Success', 'Product save successfully');\n          const url = this.router.url;\n          this.router.navigateByUrl('/', {\n            skipLocationChange: true\n          }).then(() => {\n            this.router.navigate([url]);\n          });\n        }, error => {\n          this.toastrService.error('Failed', 'Product save failed');\n          console.log(error);\n        });\n      } else {\n        this.appComponent.validateAllFormFields(this.productForm);\n      }\n    }\n\n    edit(id, model) {\n      this.authService.getProductById(id, model).subscribe(data => {\n        const product = data.product[0];\n        this.productForm = this.fb.group({\n          VproductName: [product.vproductName, Validators.required],\n          NproductPrice: [product.nproductPrice, Validators.required]\n        });\n        this.btnEditShow.nativeElement.click();\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    EditShow() {\n      this.isDataGridShow = false;\n      this.isBtnCreateShow = false;\n    }\n\n    remove(data) {\n      Swal.fire({\n        title: 'Are you sure to delete this?',\n        text: 'You won\\'t be able to revert this!',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.value) {\n          this.authService.deleteProduct(data).subscribe(() => {\n            this.toastrService.success('Success', 'Product delete successfully');\n            const url = this.router.url;\n            window.location.href = url;\n          }, error => {\n            this.toastrService.error('Error', 'Product delete failed');\n            console.log(error);\n          });\n        }\n      });\n    }\n\n    Create() {\n      this.CreateProductForm();\n      this.isDataGridShow = false;\n      this.isBtnCreateShow = false;\n    }\n\n    Close() {\n      this.isDataGridShow = true;\n      this.isBtnCreateShow = true;\n    }\n\n  }\n\n  ProductComponent.ɵfac = function ProductComponent_Factory(t) {\n    return new (t || ProductComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.AppComponent));\n  };\n\n  ProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductComponent,\n    selectors: [[\"app-product\"]],\n    viewQuery: function ProductComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.btnClose = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.btnModalOpen = _t.first);\n      }\n    },\n    decls: 60,\n    vars: 12,\n    consts: [[1, \"content-wrapper\"], [1, \"content-header\"], [1, \"container-fluid\"], [1, \"row\", \"mb-2\"], [1, \"col-sm-6\"], [1, \"content\"], [1, \"row\"], [1, \"col-12\"], [1, \"card\", \"card-primary\", \"card-outline\"], [1, \"card-header\"], [1, \"card-title\", 2, \"padding-top\", \"5px\"], [1, \"fas\", \"fa-bars\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#createProductModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"float-right\", 3, \"click\"], [\"btnModalOpen\", \"\"], [1, \"fas\", \"fa-plus-circle\"], [\"type\", \"button\", 2, \"display\", \"none\", 3, \"click\"], [\"btnEditShow\", \"\"], [1, \"card-body\", 3, \"hidden\"], [1, \"table\", \"table-bordered\", \"table-striped\", 2, \"width\", \"100%\"], [\"dataTable\", \"\"], [\"id\", \"createProductModal\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"btnClose\", \"\"], [\"aria-hidden\", \"true\"], [3, \"formGroup\", \"hidden\", \"ngSubmit\"], [1, \"modal-body\"], [1, \"card-body\"], [1, \"form-group\", \"has-feedback\"], [\"for\", \"productName\"], [2, \"color\", \"red\"], [\"type\", \"text\", \"formControlName\", \"VproductName\", \"placeholder\", \"Product Name\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"productPrice\"], [\"type\", \"text\", \"formControlName\", \"NproductPrice\", \"placeholder\", \"Product Price\", 1, \"form-control\", 3, \"ngClass\"], [1, \"modal-footer\", \"justify-content-between\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-default\", 3, \"click\"], [1, \"fas\", \"fa-window-close\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"fas\", \"fa-save\"], [1, \"invalid-feedback\"]],\n    template: function ProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"section\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"h1\");\n        i0.ɵɵtext(6, \"Product\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"section\", 5);\n        i0.ɵɵelementStart(8, \"div\", 2);\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵelementStart(13, \"h3\", 10);\n        i0.ɵɵelement(14, \"i\", 11);\n        i0.ɵɵtext(15, \" Product \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"button\", 12, 13);\n        i0.ɵɵlistener(\"click\", function ProductComponent_Template_button_click_16_listener() {\n          return ctx.Create();\n        });\n        i0.ɵɵelement(18, \"i\", 14);\n        i0.ɵɵtext(19, \" Create Product \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"button\", 15, 16);\n        i0.ɵɵlistener(\"click\", function ProductComponent_Template_button_click_20_listener() {\n          return ctx.EditShow();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 17);\n        i0.ɵɵelement(23, \"table\", 18, 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 20);\n        i0.ɵɵelementStart(26, \"div\", 21);\n        i0.ɵɵelementStart(27, \"div\", 22);\n        i0.ɵɵelementStart(28, \"div\", 23);\n        i0.ɵɵelementStart(29, \"h4\", 24);\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 25, 26);\n        i0.ɵɵelementStart(33, \"span\", 27);\n        i0.ɵɵtext(34, \"\\u00D7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"form\", 28);\n        i0.ɵɵlistener(\"ngSubmit\", function ProductComponent_Template_form_ngSubmit_35_listener() {\n          return ctx.saveProduct();\n        });\n        i0.ɵɵelementStart(36, \"div\", 29);\n        i0.ɵɵelementStart(37, \"div\", 30);\n        i0.ɵɵelementStart(38, \"div\", 31);\n        i0.ɵɵelementStart(39, \"label\", 32);\n        i0.ɵɵtext(40, \"Product Name\");\n        i0.ɵɵelementStart(41, \"span\", 33);\n        i0.ɵɵtext(42, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"input\", 34);\n        i0.ɵɵtemplate(44, ProductComponent_div_44_Template, 2, 0, \"div\", 35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"div\", 30);\n        i0.ɵɵelementStart(46, \"div\", 31);\n        i0.ɵɵelementStart(47, \"label\", 36);\n        i0.ɵɵtext(48, \"Product Price\");\n        i0.ɵɵelementStart(49, \"span\", 33);\n        i0.ɵɵtext(50, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(51, \"input\", 37);\n        i0.ɵɵtemplate(52, ProductComponent_div_52_Template, 2, 0, \"div\", 35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"div\", 38);\n        i0.ɵɵelementStart(54, \"button\", 39);\n        i0.ɵɵlistener(\"click\", function ProductComponent_Template_button_click_54_listener() {\n          return ctx.Close();\n        });\n        i0.ɵɵelement(55, \"i\", 40);\n        i0.ɵɵtext(56, \" Close \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"button\", 41);\n        i0.ɵɵelement(58, \"i\", 42);\n        i0.ɵɵtext(59, \" Save \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        let tmp_4_0;\n        let tmp_5_0;\n        let tmp_6_0;\n        let tmp_7_0;\n        i0.ɵɵadvance(22);\n        i0.ɵɵproperty(\"hidden\", !ctx.isDataGridShow);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(ctx.header);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.productForm)(\"hidden\", ctx.isDataGridShow);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c3, ((tmp_4_0 = ctx.productForm.get(\"VproductName\")) == null ? null : tmp_4_0.errors) && ((tmp_4_0 = ctx.productForm.get(\"VproductName\")) == null ? null : tmp_4_0.touched)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.productForm.get(\"VproductName\")) == null ? null : tmp_5_0.errors) && ((tmp_5_0 = ctx.productForm.get(\"VproductName\")) == null ? null : tmp_5_0.touched));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c3, ((tmp_6_0 = ctx.productForm.get(\"NproductPrice\")) == null ? null : tmp_6_0.errors) && ((tmp_6_0 = ctx.productForm.get(\"NproductPrice\")) == null ? null : tmp_6_0.touched)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.productForm.get(\"NproductPrice\")) == null ? null : tmp_7_0.errors) && ((tmp_7_0 = ctx.productForm.get(\"NproductPrice\")) == null ? null : tmp_7_0.touched));\n      }\n    },\n    directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i6.NgClass, i6.NgIf],\n    styles: [\"\"]\n  });\n  return ProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}