{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../Services/auth.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../Services/toastr.service\";\nimport * as i5 from \"../app.component\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = [\"dataTable\"];\nconst _c1 = [\"btnClose\"];\nconst _c2 = [\"btnModalOpen\"];\n\nfunction CustomerComponent_div_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1, \"You can't leave this empty.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CustomerComponent_div_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1, \"You can't leave this empty.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction CustomerComponent_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43);\n    i0.ɵɵtext(1, \"You can't leave this empty.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c3 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\n\nexport let CustomerComponent = /*#__PURE__*/(() => {\n  class CustomerComponent {\n    constructor(authService, fb, router, toastrService, appComponent) {\n      this.authService = authService;\n      this.fb = fb;\n      this.router = router;\n      this.toastrService = toastrService;\n      this.appComponent = appComponent;\n      this.parent = [];\n      Window['appCus'] = this;\n    }\n\n    ngOnInit() {\n      this.getCustomerList();\n      this.CreateCustomerForm();\n    }\n\n    CreateCustomerForm() {\n      this.header = 'Create Customer';\n      this.customerForm = this.fb.group({\n        VCustomerId: ['', Validators.nullValidator],\n        VCustomerFirstName: ['', Validators.required],\n        VCustomerLastName: ['', Validators.required],\n        VCustomerAddress: ['', Validators.required]\n      });\n    }\n\n    getCustomerList() {\n      this.authService.getCustomerList().subscribe(data => {\n        data.customerlist.forEach((value, index) => {\n          value.index = index + 1;\n        });\n        this.tableData = data.customerlist;\n        this.dtOptions = {\n          data: this.tableData,\n          columns: [{\n            title: '#',\n            data: 'index'\n          }, {\n            title: 'Customer FirstName',\n            data: 'vCustomerFirstName'\n          }, {\n            title: 'Customer LastName',\n            data: 'vCustomerLastName'\n          }, {\n            title: 'Customer Address',\n            data: 'vCustomerAddress'\n          }, {\n            title: 'Action',\n            data: 'vCustomerId',\n            sortable: false,\n            'render': function (data, type, full, meta) {\n              const bid = '\\'' + full.vCustomerId + '\\'';\n              return '<div class=\"text-center fs-18\"> ' + '<a title=\"Edit\" onclick=\"Window.appCus.edit(' + bid + ')\"><i class=\"far fa-edit\" style=\"cursor: pointer;\"> </i> </a> |' + '<a title=\"Delete\" onclick=\"Window.appCus.remove(' + bid + ')\"> <i class=\"fas fa-trash-alt\" style=\"color: red; cursor: pointer;\"></i></a>' + '</div>';\n            }\n          }],\n          responsive: true,\n          autoWidth: false\n        };\n      }, err => {\n        console.log(err);\n      }, () => {\n        this.dataTable = $(this.table.nativeElement);\n        this.dataTable.DataTable(this.dtOptions);\n      });\n    }\n\n    saveCustomer() {\n      if (this.customerForm.valid) {\n        this.customerModel = Object.assign({}, this.customerForm.value);\n        this.customerModel.VCustomerId = this.customerModel.VCustomerId === '' ? null : this.customerModel.VCustomerId;\n        this.authService.saveCustomer(this.customerModel).subscribe(() => {\n          this.btnClose.nativeElement.click();\n          this.toastrService.success('Success', 'Customer save successfully');\n          const url = this.router.url;\n          window.location.reload();\n          this.router.navigateByUrl('/', {\n            skipLocationChange: true\n          }).then(() => {\n            this.router.navigate([url]);\n          });\n        }, error => {\n          this.toastrService.error('Failed', 'Customer save failed');\n          console.log(error);\n        });\n      } else {\n        this.appComponent.validateAllFormFields(this.customerForm);\n      }\n    }\n\n    edit(data) {\n      this.btnModalOpen.nativeElement.click();\n      this.header = 'Update Customer';\n      const customer = this.tableData.filter(x => x.vCustomerId === data)[0];\n      this.customerForm = this.fb.group({\n        VCustomerId: [customer.vCustomerId, Validators.required],\n        VCustomerFirstName: [customer.vCustomerFirstName, Validators.required],\n        VCustomerLastName: [customer.vCustomerLastName, Validators.required],\n        VCustomerAddress: [customer.vCustomerAddress, Validators.required]\n      });\n    }\n\n    remove(data) {\n      Swal.fire({\n        title: 'Are you sure to delete this?',\n        text: 'You won\\'t be able to revert this!',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.value) {\n          this.authService.deleteCustomer(data).subscribe(() => {\n            this.toastrService.success('Success', 'Customer delete successfully');\n            const url = this.router.url;\n            window.location.href = url;\n          }, error => {\n            this.toastrService.error('Error', 'Customer delete failed');\n            console.log(error);\n          });\n        }\n      });\n    }\n\n    Create() {\n      this.CreateCustomerForm(); //this.isDataGridShow = true;\n      //this.isBtnCreateShow = false;\n    }\n\n    Close() {\n      this.CreateCustomerForm(); //this.isDataGridShow = true;\n      //this.isBtnCreateShow = true;\n    }\n\n  }\n\n  CustomerComponent.ɵfac = function CustomerComponent_Factory(t) {\n    return new (t || CustomerComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.AppComponent));\n  };\n\n  CustomerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CustomerComponent,\n    selectors: [[\"app-customer\"]],\n    viewQuery: function CustomerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.btnClose = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.btnModalOpen = _t.first);\n      }\n    },\n    decls: 64,\n    vars: 14,\n    consts: [[1, \"content-wrapper\"], [1, \"content-header\"], [1, \"container-fluid\"], [1, \"row\", \"mb-2\"], [1, \"col-sm-6\"], [1, \"content\"], [1, \"row\"], [1, \"col-12\"], [1, \"card\", \"card-primary\", \"card-outline\"], [1, \"card-header\"], [1, \"card-title\", 2, \"padding-top\", \"5px\"], [1, \"fas\", \"fa-bars\"], [\"type\", \"button\", \"data-toggle\", \"modal\", \"data-target\", \"#createCustomerModal\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"float-right\", 3, \"click\"], [\"btnModalOpen\", \"\"], [1, \"fas\", \"fa-plus-circle\"], [1, \"card-body\"], [1, \"table\", \"table-bordered\", \"table-striped\", 2, \"width\", \"100%\"], [\"dataTable\", \"\"], [\"id\", \"createCustomerModal\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"btnClose\", \"\"], [\"aria-hidden\", \"true\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"modal-body\"], [1, \"card-body\", \"row\"], [1, \"col-lg-6\", \"form-group\", \"has-feedback\"], [\"for\", \"customerFirstName\"], [2, \"color\", \"red\"], [\"type\", \"text\", \"formControlName\", \"VCustomerFirstName\", \"placeholder\", \"First Name\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"customerLastName\"], [\"type\", \"text\", \"formControlName\", \"VCustomerLastName\", \"placeholder\", \"Last Name\", 1, \"form-control\", 3, \"ngClass\"], [\"for\", \"customerAddress\"], [\"type\", \"text\", \"formControlName\", \"VCustomerAddress\", \"placeholder\", \"Address\", 1, \"form-control\", 3, \"ngClass\"], [1, \"modal-footer\", \"justify-content-between\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-default\", 3, \"click\"], [1, \"fas\", \"fa-window-close\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"fas\", \"fa-save\"], [1, \"invalid-feedback\"]],\n    template: function CustomerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"section\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"h1\");\n        i0.ɵɵtext(6, \"Customer\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"section\", 5);\n        i0.ɵɵelementStart(8, \"div\", 2);\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵelementStart(10, \"div\", 7);\n        i0.ɵɵelementStart(11, \"div\", 8);\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵelementStart(13, \"h3\", 10);\n        i0.ɵɵelement(14, \"i\", 11);\n        i0.ɵɵtext(15, \" Customer \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"button\", 12, 13);\n        i0.ɵɵlistener(\"click\", function CustomerComponent_Template_button_click_16_listener() {\n          return ctx.Create();\n        });\n        i0.ɵɵelement(18, \"i\", 14);\n        i0.ɵɵtext(19, \" Create Customer \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"div\", 15);\n        i0.ɵɵelement(21, \"table\", 16, 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 18);\n        i0.ɵɵelementStart(24, \"div\", 19);\n        i0.ɵɵelementStart(25, \"div\", 20);\n        i0.ɵɵelementStart(26, \"div\", 21);\n        i0.ɵɵelementStart(27, \"h4\", 22);\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"button\", 23, 24);\n        i0.ɵɵelementStart(31, \"span\", 25);\n        i0.ɵɵtext(32, \"\\u00D7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"form\", 26);\n        i0.ɵɵlistener(\"ngSubmit\", function CustomerComponent_Template_form_ngSubmit_33_listener() {\n          return ctx.saveCustomer();\n        });\n        i0.ɵɵelementStart(34, \"div\", 27);\n        i0.ɵɵelementStart(35, \"div\", 28);\n        i0.ɵɵelementStart(36, \"div\", 29);\n        i0.ɵɵelementStart(37, \"label\", 30);\n        i0.ɵɵtext(38, \"First Name\");\n        i0.ɵɵelementStart(39, \"span\", 31);\n        i0.ɵɵtext(40, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"input\", 32);\n        i0.ɵɵtemplate(42, CustomerComponent_div_42_Template, 2, 0, \"div\", 33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"div\", 29);\n        i0.ɵɵelementStart(44, \"label\", 34);\n        i0.ɵɵtext(45, \"Last Name\");\n        i0.ɵɵelementStart(46, \"span\", 31);\n        i0.ɵɵtext(47, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"input\", 35);\n        i0.ɵɵtemplate(49, CustomerComponent_div_49_Template, 2, 0, \"div\", 33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"div\", 29);\n        i0.ɵɵelementStart(51, \"label\", 36);\n        i0.ɵɵtext(52, \"Address\");\n        i0.ɵɵelementStart(53, \"span\", 31);\n        i0.ɵɵtext(54, \"*\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(55, \"input\", 37);\n        i0.ɵɵtemplate(56, CustomerComponent_div_56_Template, 2, 0, \"div\", 33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"div\", 38);\n        i0.ɵɵelementStart(58, \"button\", 39);\n        i0.ɵɵlistener(\"click\", function CustomerComponent_Template_button_click_58_listener() {\n          return ctx.Close();\n        });\n        i0.ɵɵelement(59, \"i\", 40);\n        i0.ɵɵtext(60, \" Close \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"button\", 41);\n        i0.ɵɵelement(62, \"i\", 42);\n        i0.ɵɵtext(63, \" Save \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        let tmp_2_0;\n        let tmp_3_0;\n        let tmp_4_0;\n        let tmp_5_0;\n        let tmp_6_0;\n        let tmp_7_0;\n        i0.ɵɵadvance(28);\n        i0.ɵɵtextInterpolate(ctx.header);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.customerForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c3, ((tmp_2_0 = ctx.customerForm.get(\"VCustomerFirstName\")) == null ? null : tmp_2_0.errors) && ((tmp_2_0 = ctx.customerForm.get(\"VCustomerFirstName\")) == null ? null : tmp_2_0.touched)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.customerForm.get(\"VCustomerFirstName\")) == null ? null : tmp_3_0.errors) && ((tmp_3_0 = ctx.customerForm.get(\"VCustomerFirstName\")) == null ? null : tmp_3_0.touched));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c3, ((tmp_4_0 = ctx.customerForm.get(\"VCustomerLastName\")) == null ? null : tmp_4_0.errors) && ((tmp_4_0 = ctx.customerForm.get(\"VCustomerLastName\")) == null ? null : tmp_4_0.touched)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_5_0 = ctx.customerForm.get(\"VCustomerLastName\")) == null ? null : tmp_5_0.errors) && ((tmp_5_0 = ctx.customerForm.get(\"VCustomerLastName\")) == null ? null : tmp_5_0.touched));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c3, ((tmp_6_0 = ctx.customerForm.get(\"VCustomerAddress\")) == null ? null : tmp_6_0.errors) && ((tmp_6_0 = ctx.customerForm.get(\"VCustomerAddress\")) == null ? null : tmp_6_0.touched)));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_7_0 = ctx.customerForm.get(\"VCustomerAddress\")) == null ? null : tmp_7_0.errors) && ((tmp_7_0 = ctx.customerForm.get(\"VCustomerAddress\")) == null ? null : tmp_7_0.touched));\n      }\n    },\n    directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i6.NgClass, i6.NgIf],\n    styles: [\"\"]\n  });\n  return CustomerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}